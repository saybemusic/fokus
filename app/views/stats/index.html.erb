<div class="stats-wrapper">
  <div class="stats-background"></div>

  <header class="stats-header">
    <h1 class="stats-title">
      Mes Statistiques<span class="stats-title-dot">.</span>
    </h1>
  </header>

  <div class="stats-container">

    <div class="stats-grid">

      <!-- 1 - Objectifs cr√©√©s -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Objectifs cr√©√©s
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @objectives_count %></p>
        </div>
      </div>

      <!-- 2 - Objectifs compl√©t√©s -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Objectifs compl√©t√©s
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @objectives_completed %></p>
        </div>
      </div>

      <!-- 3 - Objectif pr√©f√©r√© -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Objectif pr√©f√©r√©
        </div>
        <div class="stats-card-body">
          <% if @favorite_objective %>
            <p class="stats-card-number"><%= @favorite_objective.goal %></p>
          <% else %>
            <p class="stats-card-number">Aucun</p>
          <% end %>
        </div>
      </div>

      <!-- 4 - Tasks compl√©t√©es -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Tasks compl√©t√©es
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @tasks_done %> / <%= @tasks_total %></p>
        </div>
      </div>

      <!-- 5 - Total tasks -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Total tasks
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @tasks_total %></p>
        </div>
      </div>

      <!-- 6 - Jours actifs -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Jours actifs
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @days_visited_count %></p>
        </div>
      </div>

      <!-- 7 - Streak actuel -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Streak actuel
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @streak %> jours</p>
        </div>
      </div>

      <!-- üî• 8 - Productivit√© quotidienne moyenne -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Productivit√© moyenne
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @productivity_avg %> tasks/jour</p>
        </div>
      </div>

      <!-- üî• 9 - Jour le plus productif -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Jour le plus productif
        </div>
        <div class="stats-card-body">
          <% if @most_productive_day %>
            <p class="stats-card-number"><%= @most_productive_day.strftime("%d %b %Y") %></p>
            <small><%= @most_productive_count %> tasks</small>
          <% else %>
            <p class="stats-card-number">Aucun</p>
          <% end %>
        </div>
      </div>

      <!-- üî• 10 - Pourcentage de t√¢ches en retard -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          T√¢ches en retard
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @late_percentage %>%</p>
        </div>
      </div>

      <!-- üî• 11 - Heure la plus fr√©quente -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Heure d‚Äôactivit√©
        </div>
        <div class="stats-card-body">
          <% if @favorite_hour %>
            <p class="stats-card-number"><%= @favorite_hour %>h</p>
          <% else %>
            <p class="stats-card-number">N/A</p>
          <% end %>
        </div>
      </div>

      <!-- üî• 12 - Temps total estim√© -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Temps total estim√©
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @total_learning_time %> min</p>
        </div>
      </div>

      <!-- üî• 13 - Progression moyenne -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Progression moyenne
        </div>
        <div class="stats-card-body">
          <p class="stats-card-number"><%= @avg_progression %>%</p>
        </div>
      </div>

      <!-- üî• 14 - Objectif le plus rapide -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Objectif le plus rapide
        </div>
        <div class="stats-card-body">
          <% if @fastest_objective %>
            <p class="stats-card-number"><%= @fastest_objective.goal %></p>
          <% else %>
            <p class="stats-card-number">Aucun</p>
          <% end %>
        </div>
      </div>

      <!-- üî• 15 - Objectif le plus lent -->
      <div class="stats-card">
        <div class="stats-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
          Objectif le plus lent
        </div>
        <div class="stats-card-body">
          <% if @slowest_objective %>
            <p class="stats-card-number"><%= @slowest_objective.goal %></p>
          <% else %>
            <p class="stats-card-number">Aucun</p>
          <% end %>
        </div>
      </div>

    </div>

    <!-- HEATMAP -->
    <div class="stats-large-card">
      <div class="stats-card-title stats-large-card-title" style="background-image: url('<%= image_path("backgroundHome.png") %>');">
        Historique d‚Äôactivit√©
      </div>
      <div class="stats-large-card-body">
        <canvas
          width="900"
          height="180"
          data-controller="heatmap"
          data-heatmap-data-value="<%= @days_visited.to_json %>"
        ></canvas>
      </div>
    </div>
      <%= link_to "Statistiques de tous mes objectifs", stats_objectives_path %>
  </div>
</div>
